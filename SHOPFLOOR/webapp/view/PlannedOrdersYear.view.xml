<mvc:View
  controllerName="SHOPFLOOR.controller.PlannedOrdersYear"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:f="sap.f"
  xmlns:ui="sap.ui.table"
  displayBlock="true">

  <Page title="Year-wise Planned Orders" showNavButton="true" navButtonPress="onNavBack">
    
    <!-- Search Bar -->
    <subHeader>
      <Toolbar>
        <SearchField
          id="searchField"
          width="20%"
          placeholder="Search by Year (e.g., 2025)"
          search="onSearch"
          liveChange="onSearchLiveChange" />
        <ToolbarSpacer />
        <DatePicker
          id="fromDatePicker"
          placeholder="From Date"
          change="onDateRangeChange"
          displayFormat="MM/dd/yyyy" />
        <Label text="To:" />
        <DatePicker
          id="toDatePicker"
          placeholder="To Date"
          change="onDateRangeChange"
          displayFormat="MM/dd/yyyy" />
        <ToolbarSpacer />
        <Input
          id="documentNumberInput"
          placeholder="Document Number"
          width="15%"
          change="onDocumentNumberChange" />
        <Button text="Clear Filters" press="onClearFilters" />
      </Toolbar>
    </subHeader>

    <!-- Data Table -->
    <content>
      <ScrollContainer width="100%" height="auto" horizontal="true" vertical="false" class="poYearScroller hide-scrollbar">
        <content>
          <ui:Table
            id="plannedOrdersTable"
            rows="{viewModel>/data}"
            selectionMode="None"
            visibleRowCount="20"
            enableBusyIndicator="true"
            rowHeight="44"
            columnHeaderHeight="40"
            class="sapUiSizeCompact plannedOrdersTable">
            
            <ui:columns>
              <ui:Column sortProperty="Plnum" filterProperty="Plnum" width="9rem">
                <Label text="Plan Number" />
                <ui:template>
                  <Text text="{viewModel>Plnum}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Matnr" filterProperty="Matnr" width="8rem">
                <Label text="Material" />
                <ui:template>
                  <Text text="{viewModel>Matnr}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Plwrk" filterProperty="Plwrk" width="7rem">
                <Label text="Plant" />
                <ui:template>
                  <Text text="{viewModel>Plwrk}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Gsmng" filterProperty="Gsmng" width="9rem">
                <Label text="Total Quantity" />
                <ui:template>
                  <Text text="{viewModel>Gsmng}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Avmng" filterProperty="Avmng" width="10rem">
                <Label text="Available Quantity" />
                <ui:template>
                  <Text text="{viewModel>Avmng}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Psttr" filterProperty="Psttr" width="10rem">
                <Label text="Start Date" />
                <ui:template>
                  <Text text="{viewModel>PsttrFormatted}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Pedtr" filterProperty="Pedtr" width="10rem">
                <Label text="End Date" />
                <ui:template>
                  <Text text="{viewModel>PedtrFormatted}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Pertr" filterProperty="Pertr" width="11rem">
                <Label text="Transaction Date" />
                <ui:template>
                  <Text text="{viewModel>PertrFormatted}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Zyear" filterProperty="Zyear" width="7rem">
                <Label text="Year" />
                <ui:template>
                  <Text text="{viewModel>Zyear}" />
                </ui:template>
              </ui:Column>
             
              <ui:Column sortProperty="Dispo" filterProperty="Dispo" width="8rem">
                <Label text="Dispatcher" />
                <ui:template>
                  <Text text="{viewModel>Dispo}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Paart" filterProperty="Paart" width="8rem">
                <Label text="Order Type" />
                <ui:template>
                  <Text text="{viewModel>Paart}" />
                </ui:template>
              </ui:Column>
              
              <ui:Column sortProperty="Meins" filterProperty="Meins" width="6rem">
                <Label text="Unit" />
                <ui:template>
                  <Text text="{viewModel>Meins}" />
                </ui:template>
              </ui:Column>
            </ui:columns>
          </ui:Table>
        </content>
      </ScrollContainer>
    </content>
    
    <!-- Footer with Refresh Button -->
    <footer>
      <Toolbar>
        <ToolbarSpacer />
        <Button text="Refresh Data" press="onRefreshData" icon="sap-icon://refresh" />
        <Text text="Total Records: {= ${viewModel>/data}.length}" />
      </Toolbar>
    </footer>
  </Page>
</mvc:View>
